<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Panel Administrador - Registro Horas Cole</title>
    <link rel="stylesheet" href="/css/styles.css" />
  </head>
  <body class="admin-body">
    <!-- Header del Panel -->
    <header class="admin-header">
      <div class="admin-header-content">
        <div class="admin-logo">
          <h1>üëë Registro Horas Cole</h1>
          <span class="admin-badge">Administrador</span>
        </div>

        <div class="admin-user">
          <span class="welcome-text"
            >Bienvenida, <strong id="nombreUsuario"></strong
          ></span>
          <button class="btn btn-secondary btn-sm" onclick="cerrarSesion()">
            Cerrar Sesi√≥n
          </button>
        </div>
      </div>
    </header>

    <!-- Navegaci√≥n por pesta√±as con overlay -->

    <nav class="admin-nav" id="adminNav">
      <button class="nav-btn active" data-tab="dashboard">üìä Dashboard</button>
      <button class="nav-btn" data-tab="usuarios">üë• Usuarios</button>
      <button class="nav-btn" data-tab="grupos">üìö Grupos</button>
      <button class="nav-btn" data-tab="cursos">üí∞ Cursos</button>
      <button class="nav-btn" data-tab="bancos">üè¶ Bancos</button>
      <button class="nav-btn" data-tab="cuentas-cobro">
        üìÑ Cuentas de Cobro
      </button>
      <button class="nav-btn" data-tab="historico">‚è±Ô∏è Hist√≥rico Horas</button>
      <button class="nav-btn" data-tab="perfil">üë§ Mi Perfil</button>
    </nav>

    <!-- Contenedor principal -->
    <main class="admin-main">
      <!-- TAB: DASHBOARD -->
      <section id="tab-dashboard" class="tab-content active">
        <h2 class="tab-title">üìä Dashboard General</h2>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">üë•</div>
            <div class="stat-content">
              <h3 id="statDocentes">0</h3>
              <p>Docentes Activos</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">üìö</div>
            <div class="stat-content">
              <h3 id="statGrupos">0</h3>
              <p>Grupos Activos</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">‚è∞</div>
            <div class="stat-content">
              <h3 id="statHoras">0</h3>
              <p>Horas Este Mes</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">üí∞</div>
            <div class="stat-content">
              <h3 id="statMonto">$0</h3>
              <p>Total a Pagar</p>
            </div>
          </div>
        </div>
      </section>

      <!-- TAB: USUARIOS -->
      <section id="tab-usuarios" class="tab-content">
        <div class="tab-header">
          <h2 class="tab-title">üë• Gesti√≥n de Usuarios</h2>
          <button class="btn btn-primary" onclick="abrirModalUsuario()">
            ‚ûï Nuevo Usuario
          </button>
        </div>

        <div class="table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Documento</th>
                <th>Email</th>
                <th>Rol</th>
                <th>Banco</th>
                <th>Estado</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody id="tablaUsuarios">
              <tr>
                <td colspan="7" class="text-center">Cargando...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- TAB: GRUPOS -->
      <section id="tab-grupos" class="tab-content">
        <div class="tab-header">
          <h2 class="tab-title">üìö Gesti√≥n de Grupos</h2>
          <button class="btn btn-primary" onclick="abrirModalGrupo()">
            ‚ûï Nuevo Grupo
          </button>
        </div>

        <div class="table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>C√≥digo</th>
                <th>Nombre</th>
                <th>Tipo de Curso</th>
                <th>Programa</th>
                <th>Valor/Hora</th>
                <th>Docente</th>
                <th>Estado</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody id="tablaGrupos">
              <tr>
                <td colspan="8" class="text-center">Cargando...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
      <!-- TAB: M√ìDULOS -->
      <section id="tab-cursos" class="tab-content">
        <div class="tab-header">
          <h2 class="tab-title">üìö M√≥dulos del Programa</h2>
          <button class="btn btn-primary" onclick="abrirModalCurso()">
            ‚ûï Nuevo M√≥dulo
          </button>
        </div>

        <div class="table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Programa</th>
                <th>M√≥dulo</th>
                <th>Valor/Hora</th>
                <th>Estado</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody id="tablaCursos">
              <tr>
                <td colspan="5" class="text-center">Cargando...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- TAB: BANCOS -->
      <section id="tab-bancos" class="tab-content">
        <h2 class="tab-title">üè¶ Gesti√≥n Bancaria</h2>

        <div class="bancos-grid">
          <!-- Secci√≥n Bancos -->
          <div class="bancos-section">
            <div class="section-header">
              <h3>Bancos</h3>
              <button
                class="btn btn-primary btn-sm"
                onclick="abrirModalBanco()"
              >
                ‚ûï Nuevo Banco
              </button>
            </div>
            <div class="table-container">
              <table class="admin-table">
                <thead>
                  <tr>
                    <th>Nombre</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                  </tr>
                </thead>
                <tbody id="tablaBancos">
                  <tr>
                    <td colspan="3" class="text-center">Cargando...</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Secci√≥n Tipos de Cuenta -->
          <div class="bancos-section">
            <div class="section-header">
              <h3>Tipos de Cuenta</h3>
              <button
                class="btn btn-primary btn-sm"
                onclick="abrirModalTipoCuenta()"
              >
                ‚ûï Nuevo Tipo
              </button>
            </div>
            <div class="table-container">
              <table class="admin-table">
                <thead>
                  <tr>
                    <th>Nombre</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                  </tr>
                </thead>
                <tbody id="tablaTiposCuenta">
                  <tr>
                    <td colspan="3" class="text-center">Cargando...</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <!-- NUEVA TAB: CUENTAS DE COBRO -->
      <section id="tab-cuentas-cobro" class="tab-content">
        <h2 class="tab-title">üìÑ Cuentas de Cobro Generadas</h2>
        <div class="table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Docente</th>
                <th>Documento</th>
                <th>Per√≠odo</th>
                <th>Total Horas</th>
                <th>Total a Pagar</th>
                <th>Generado</th>
                <th>PDF</th>
              </tr>
            </thead>
            <tbody id="tablaCuentasCobro">
              <tr>
                <td colspan="7" class="text-center">Cargando...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- NUEVA TAB: HIST√ìRICO DE HORAS -->
      <section id="tab-historico" class="tab-content">
        <h2 class="tab-title">‚è±Ô∏è Hist√≥rico de Registros de Horas</h2>

        <div class="filtros-container">
          <div
            class="form-row"
            style="align-items: end; gap: 1rem; flex-wrap: wrap"
          >
            <div class="form-group">
              <label>Desde</label>
              <input type="date" id="filtroDesde" />
            </div>
            <div class="form-group">
              <label>Hasta</label>
              <input type="date" id="filtroHasta" />
            </div>
            <div class="form-group">
              <label>Docente</label>

              <select id="filtroDocente">
                <option value="">Todos los docentes</option>
              </select>
            </div>
            <div>
              <button class="btn btn-primary" id="btnFiltrarHistorico">
                üîç Filtrar
              </button>
              <button class="btn btn-secondary" id="btnLimpiarFiltros">
                üóëÔ∏è Limpiar
              </button>
            </div>
          </div>
        </div>

        <div class="table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Fecha</th>
                <th>Docente</th>
                <th>Documento</th>
                <th>Grupo</th>
                <th>M√≥dulo</th>
                <th>Programa</th>
                <th>Horas</th>
                <th>Ingreso</th>
                <th>Salida</th>
                <th>Tema</th>
                <th>Observaciones</th>
              </tr>
            </thead>
            <tbody id="tablaHistorico">
              <tr>
                <td colspan="11" class="text-center">Cargando...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- TAB: MI PERFIL -->
      <section id="tab-perfil" class="tab-content">
        <h2 class="tab-title">üë§ Mi Perfil</h2>

        <div class="perfil-container">
          <div class="perfil-card">
            <div class="perfil-header">
              <div class="perfil-avatar">üëë</div>
              <h3 id="perfilNombre">Cargando...</h3>
              <p id="perfilRol" class="perfil-rol">Administrador</p>
            </div>

            <div class="perfil-info">
              <div class="info-item">
                <span class="info-label">üìÑ Documento:</span>
                <span id="perfilDocumento">-</span>
              </div>
              <div class="info-item">
                <span class="info-label">üìß Email:</span>
                <span id="perfilEmail">-</span>
              </div>
              <div class="info-item">
                <span class="info-label">üì± Tel√©fono:</span>
                <span id="perfilTelefono">-</span>
              </div>
              <div class="info-item">
                <span class="info-label">üè¶ Banco:</span>
                <span id="perfilBanco">-</span>
              </div>
              <div class="info-item">
                <span class="info-label">üí≥ Tipo Cuenta:</span>
                <span id="perfilTipoCuenta">-</span>
              </div>
              <div class="info-item">
                <span class="info-label">üî¢ N¬∞ Cuenta:</span>
                <span id="perfilNumeroCuenta">-</span>
              </div>
            </div>

            <div class="perfil-actions">
              <button class="btn btn-primary" onclick="editarMiPerfil()">
                ‚úèÔ∏è Editar Perfil
              </button>
              <button class="btn btn-secondary" onclick="cambiarMiContrasena()">
                üîí Cambiar Contrase√±a
              </button>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- MODAL: Usuario -->
    <div id="modalUsuario" class="modal">
      <div class="modal-content modal-large">
        <span class="close-modal" onclick="cerrarModal('modalUsuario')"
          >&times;</span
        >
        <h2 id="modalUsuarioTitulo">Nuevo Usuario</h2>

        <form id="formUsuario" class="modal-form">
          <input type="hidden" id="usuarioId" />

          <div class="form-row">
            <div class="form-group">
              <label>Nombre Completo *</label>
              <input type="text" id="usuarioNombre" required />
            </div>

            <div class="form-group">
              <label>Documento *</label>
              <input type="text" id="usuarioDocumento" required />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Email</label>
              <input type="email" id="usuarioEmail" />
            </div>

            <div class="form-group">
              <label>Tel√©fono</label>
              <input type="text" id="usuarioTelefono" />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Rol *</label>
              <select id="usuarioRol" required>
                <option value="">Seleccionar...</option>
              </select>
            </div>

            <div class="form-group" id="grupoPassword">
              <label>Contrase√±a *</label>
              <input type="password" id="usuarioPassword" />
            </div>
          </div>

          <div class="form-section-title">Informaci√≥n Bancaria</div>

          <div class="form-row">
            <div class="form-group">
              <label>Banco</label>
              <select id="usuarioBanco">
                <option value="">Seleccionar...</option>
              </select>
            </div>

            <div class="form-group">
              <label>Tipo de Cuenta</label>
              <select id="usuarioTipoCuenta">
                <option value="">Seleccionar...</option>
              </select>
            </div>

            <div class="form-group">
              <label>N√∫mero de Cuenta</label>
              <input type="text" id="usuarioNumeroCuenta" />
            </div>
          </div>

          <div class="modal-actions">
            <button type="submit" class="btn btn-primary">Guardar</button>
            <button
              type="button"
              class="btn btn-secondary"
              onclick="cerrarModal('modalUsuario')"
            >
              Cancelar
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- MODAL: Grupo -->
    <div id="modalGrupo" class="modal">
      <div class="modal-content">
        <span class="close-modal" onclick="cerrarModal('modalGrupo')"
          >&times;</span
        >
        <h2 id="modalGrupoTitulo">Nuevo Grupo</h2>

        <form id="formGrupo" class="modal-form">
          <input type="hidden" id="grupoId" />

          <div class="form-group">
            <label>C√≥digo del Grupo *</label>
            <input
              type="text"
              id="grupoCodigo"
              placeholder="Ej: BA-101"
              required
            />
          </div>

          <div class="form-group">
            <label>Nombre del Grupo *</label>
            <input
              type="text"
              id="grupoNombre"
              placeholder="Ej: Manicure B√°sico"
              required
            />
          </div>

          <div class="form-group">
            <label>Tipo de Curso *</label>
            <select id="grupoTipo" required>
              <option value="">Seleccionar...</option>
            </select>
          </div>

          <!-- <div class="form-group">
            <label>Programa *</label>
            <select id="grupoPrograma" required>
              <option value="">Seleccionar...</option>
            </select>
          </div> -->

          <div class="form-group">
            <label>Docente Asignado *</label>
            <select id="grupoDocente" required>
              <option value="">Seleccionar...</option>
            </select>
          </div>

          <div class="modal-actions">
            <button type="submit" class="btn btn-primary">Guardar</button>
            <button
              type="button"
              class="btn btn-secondary"
              onclick="cerrarModal('modalGrupo')"
            >
              Cancelar
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- MODAL: Tipo de Curso -->
    <div id="modalCurso" class="modal">
      <div class="modal-content">
        <span class="close-modal" onclick="cerrarModal('modalCurso')"
          >&times;</span
        >
        <h2 id="modalCursoTitulo">Nuevo Tipo de Curso</h2>

        <form id="formCurso" class="modal-form">
          <input type="hidden" id="cursoId" />

          <div class="form-group">
            <label>Programa *</label>
            <input
              type="text"
              id="cursoPrograma"
              placeholder="Ej: T√©cnico en Belleza"
              required
            />
            <small>Nombre del programa educativo</small>
          </div>

          <div class="form-group">
            <label>Nombre del M√≥dulo *</label>
            <input
              type="text"
              id="cursoNombre"
              placeholder="Ej: Curso B√°sico"
              required
            />
          </div>

          <div class="form-group">
            <label>Valor por Hora *</label>
            <input
              type="number"
              id="cursoValor"
              placeholder="Ej: 25000"
              required
              min="0"
              step="100"
            />
          </div>

          <div class="modal-actions">
            <button type="submit" class="btn btn-primary">Guardar</button>
            <button
              type="button"
              class="btn btn-secondary"
              onclick="cerrarModal('modalCurso')"
            >
              Cancelar
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- MODAL: Banco -->
    <div id="modalBanco" class="modal">
      <div class="modal-content modal-small">
        <span class="close-modal" onclick="cerrarModal('modalBanco')"
          >&times;</span
        >
        <h2 id="modalBancoTitulo">Nuevo Banco</h2>

        <form id="formBanco" class="modal-form">
          <input type="hidden" id="bancoId" />

          <div class="form-group">
            <label>Nombre del Banco *</label>
            <input
              type="text"
              id="bancoNombre"
              placeholder="Ej: Bancolombia"
              required
            />
          </div>

          <div class="modal-actions">
            <button type="submit" class="btn btn-primary">Guardar</button>
            <button
              type="button"
              class="btn btn-secondary"
              onclick="cerrarModal('modalBanco')"
            >
              Cancelar
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- MODAL: Tipo de Cuenta -->
    <div id="modalTipoCuenta" class="modal">
      <div class="modal-content modal-small">
        <span class="close-modal" onclick="cerrarModal('modalTipoCuenta')"
          >&times;</span
        >
        <h2 id="modalTipoCuentaTitulo">Nuevo Tipo de Cuenta</h2>

        <form id="formTipoCuenta" class="modal-form">
          <input type="hidden" id="tipoCuentaId" />

          <div class="form-group">
            <label>Nombre del Tipo *</label>
            <input
              type="text"
              id="tipoCuentaNombre"
              placeholder="Ej: Ahorros"
              required
            />
          </div>

          <div class="modal-actions">
            <button type="submit" class="btn btn-primary">Guardar</button>
            <button
              type="button"
              class="btn btn-secondary"
              onclick="cerrarModal('modalTipoCuenta')"
            >
              Cancelar
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- MODAL: Cambiar Contrase√±a -->
    <div id="modalPassword" class="modal">
      <div class="modal-content modal-small">
        <span class="close-modal" onclick="cerrarModal('modalPassword')"
          >&times;</span
        >
        <h2>Cambiar Contrase√±a</h2>

        <form id="formPassword" class="modal-form">
          <input type="hidden" id="passwordUserId" />

          <div class="form-group">
            <label>Nueva Contrase√±a *</label>
            <input type="password" id="passwordNueva" required minlength="6" />
            <small>M√≠nimo 6 caracteres</small>
          </div>

          <div class="form-group">
            <label>Confirmar Contrase√±a *</label>
            <input type="password" id="passwordConfirmar" required />
          </div>

          <div class="modal-actions">
            <button type="submit" class="btn btn-primary">Cambiar</button>
            <button
              type="button"
              class="btn btn-secondary"
              onclick="cerrarModal('modalPassword')"
            >
              Cancelar
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- MODAL: Confirmar Activar/Desactivar Usuario -->
    <div id="modalConfirmarEstado" class="modal">
      <div class="modal-content modal-small">
        <div
          class="modal-icon"
          id="iconoEstado"
          style="font-size: 4rem; text-align: center; margin-bottom: 1rem"
        >
          ‚ö†Ô∏è
        </div>
        <h2
          style="text-align: center; color: var(--primary-color)"
          id="tituloEstado"
        >
          Confirmar acci√≥n
        </h2>
        <p
          style="text-align: center; color: var(--text-dark); margin: 1.5rem 0"
          id="mensajeEstado"
        >
          ¬øEst√°s segur@ de realizar esta acci√≥n?
        </p>
        <div class="modal-actions">
          <button class="btn btn-primary" id="btnConfirmarEstado">
            Confirmar
          </button>
          <button
            class="btn btn-secondary"
            onclick="cerrarModal('modalConfirmarEstado')"
          >
            Cancelar
          </button>
        </div>
      </div>
    </div>

    <!-- MODAL: Confirmar Eliminar Usuario -->
    <div id="modalEliminarUsuario" class="modal">
      <div class="modal-content modal-small">
        <div
          class="modal-icon"
          style="font-size: 4rem; text-align: center; margin-bottom: 1rem"
        >
          üóëÔ∏è
        </div>
        <h2 style="text-align: center; color: #dc3545">¬°Atenci√≥n!</h2>
        <p
          style="text-align: center; color: var(--text-dark); margin: 1.5rem 0"
        >
          <strong>¬øEst√°s segur@ de eliminar este usuario?</strong><br />
          Esta acci√≥n NO se puede deshacer y se eliminar√° todo el historial
          asociado.
        </p>
        <div
          style="
            background: #fff3cd;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            text-align: left;
          "
        >
          <p style="margin: 0; color: #856404; font-size: 0.9rem">
            üí° <strong>Recomendaci√≥n:</strong> Es mejor desactivar el usuario
            para mantener el historial.
          </p>
        </div>
        <div class="modal-actions">
          <button
            class="btn btn-primary"
            style="background: #dc3545"
            id="btnConfirmarEliminar"
          >
            S√≠, Eliminar
          </button>
          <button
            class="btn btn-secondary"
            onclick="cerrarModal('modalEliminarUsuario')"
          >
            Cancelar
          </button>
        </div>
      </div>
    </div>

    <!-- MODAL: Cerrar Sesi√≥n -->
    <div id="modalCerrarSesion" class="modal">
      <div class="modal-content modal-small">
        <div
          class="modal-icon"
          style="font-size: 4rem; text-align: center; margin-bottom: 1rem"
        >
          üëã
        </div>
        <h2 style="text-align: center; color: var(--primary-color)">
          ¬øCerrar Sesi√≥n?
        </h2>
        <p
          style="text-align: center; color: var(--text-light); margin: 1.5rem 0"
        >
          ¬øEst√°s segur@ de que deseas salir del sistema?
        </p>
        <div class="modal-actions">
          <button class="btn btn-primary" onclick="confirmarCerrarSesion()">
            S√≠, Cerrar Sesi√≥n
          </button>
          <button
            class="btn btn-secondary"
            onclick="cerrarModal('modalCerrarSesion')"
          >
            Cancelar
          </button>
        </div>
      </div>
    </div>

    <script src="/js/admin.js"></script>
  </body>
</html>
